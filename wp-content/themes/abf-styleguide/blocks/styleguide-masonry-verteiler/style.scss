// Styleguide Masonry Verteiler Block Styles
.styleguide-masonry-verteiler-block {
    @include styleguide-block-spacing;
    
    // Headline
    .styleguide-masonry-verteiler-headline {
        margin-bottom: 1.5rem;
        margin-top: 0;
        
        // Responsive adjustments
        @media (max-width: 768px) {
            margin-bottom: 1rem;
        }
    }
    
    // Hybrid-System: Desktop PHP-Spalten (exakte Reihenfolge), Mobile CSS-Columns (responsive)
    .styleguide-masonry-verteiler-container {
        width: 100%;
        
        // Desktop: PHP-generierte Spalten (behält Backend-Reihenfolge)
        &.desktop-columns {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0;
            
            @media (max-width: 768px) {
                display: none; // Verstecke Desktop-Version auf Tablet/Mobile
            }
        }
        
        // Mobile/Tablet: CSS-Columns (responsive Verteilung)
        &.mobile-columns {
            display: none; // Standardmäßig versteckt
            columns: 2;
            column-gap: 0;
            
            @media (max-width: 768px) {
                display: block; // Zeige Mobile-Version auf Tablet/Mobile
            }
            
            @media (max-width: 480px) {
                columns: 1;
            }
        }
    }
    
    // Column Layout (für Desktop-Version)
    .masonry-column {
        display: flex;
        flex-direction: column;
        gap: 0;
    }
    
    // Masonry Elements (Hybrid-System)
    .masonry-element {
        position: relative;
        width: 100%;
        margin-bottom: 0; // Gaplos
        overflow: hidden;
        border-radius: 0px;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        
        // Nur in CSS-Columns-Version: Verhindert Teilung zwischen Spalten
        .mobile-columns & {
            break-inside: avoid;
            display: block;
        }
        
        // Aspect Ratios
        &--landscape {
            aspect-ratio: 4 / 3;
        }
        
        &--portrait {
            aspect-ratio: 4 / 6;
        }
        
        // Linked elements hover effect
        &--linked {
            cursor: pointer;
            
            &:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            }
            
            &:active {
                transform: translateY(0);
            }
        }
        
        // Content Type Variations
        &--image {
            background: #f5f5f5;
        }
        
        &--color {
            // Background color set via inline styles
            background: transparent; // Explicit default
        }
    }
    
    // Element Link (invisible wrapper)
    .masonry-element__link {
        display: block;
        width: 100%;
        height: 100%;
        text-decoration: none;
        color: inherit;
        
        &:focus {
            outline: 2px solid #0073aa;
            outline-offset: 2px;
        }
    }
    
    // Element Content Container
    .masonry-element__content {
        position: relative;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: flex-end; // Bottom alignment for text
        justify-content: flex-start; // Left alignment for text
        overflow: hidden;
        border-radius: 0px;
    }
    
    // Image Styling
    .masonry-element__image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
        transition: transform 0.3s ease;
        
        // Hover effect for linked images
        .masonry-element--linked:hover & {
            transform: scale(1.05);
        }
    }
    
    // Text Overlay
    .masonry-element__text-overlay {
        position: relative;
        z-index: 2;
        padding: 1rem;
        margin: 0;
        font-weight: 500;
        line-height: 1.3;
        max-width: 100%;
        word-wrap: break-word;
        
        // Text shadow only for images with shadow enabled
        .masonry-element--with-shadow & {
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        // No text shadow for color backgrounds or images without shadow
        .masonry-element--color &,
        .masonry-element--image:not(.masonry-element--with-shadow) & {
            text-shadow: none;
        }
    }
    
    // Full-width background overlay for images with shadow enabled (better readability)
    .masonry-element--with-shadow .masonry-element__content::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 40%;
        background: linear-gradient(
            to top, 
            rgba(0, 0, 0, 0.7) 0%, 
            rgba(0, 0, 0, 0.3) 70%, 
            transparent 100%
        );
        z-index: 1;
        pointer-events: none;
    }
    
    // Ensure text is above the overlay for images with shadow
    .masonry-element--with-shadow .masonry-element__text-overlay {
        z-index: 2;
        
        // Responsive text adjustments
        @media (max-width: 768px) {
            padding: 0.75rem;
            font-size: 14px !important; // Override inline styles on mobile
        }
        
        @media (max-width: 480px) {
            padding: 0.5rem;
            font-size: 12px !important;
        }
    }
    
    // Placeholder Message
    .styleguide-masonry-verteiler-placeholder {
        padding: 2rem;
        text-align: center;
        background: #f9f9f9;
        border: 2px dashed #ddd;
        border-radius: 0px;
        color: #666;
        
        p {
            margin: 0;
            font-size: 1.1rem;
        }
    }
    
    // Loading states and animations
    .masonry-element {
        &.loading {
            opacity: 0.7;
            
            .masonry-element__image {
                filter: blur(2px);
            }
        }
    }
    
    // Focus states for accessibility
    .masonry-element__link:focus-visible {
        outline: 3px solid #0073aa;
        outline-offset: 2px;
        border-radius: 0px;
    }
    
    // High contrast mode support
    @media (prefers-contrast: high) {
        .masonry-element--with-shadow .masonry-element__content::after {
            background: linear-gradient(
                to top, 
                rgba(0, 0, 0, 0.9) 0%, 
                rgba(0, 0, 0, 0.5) 70%, 
                transparent 100%
            );
        }
        
        .masonry-element--linked:hover {
            outline: 2px solid currentColor;
        }
    }
    
    // Reduced motion support
    @media (prefers-reduced-motion: reduce) {
        .masonry-element,
        .masonry-element__image {
            transition: none;
        }
        
        .masonry-element--linked:hover {
            transform: none;
        }
    }
    
    // Print styles
    @media print {
        .masonry-element {
            break-inside: avoid;
            margin-bottom: 1rem;
        }
        
        .masonry-element--with-shadow .masonry-element__content::after {
            display: none;
        }
    }
} 