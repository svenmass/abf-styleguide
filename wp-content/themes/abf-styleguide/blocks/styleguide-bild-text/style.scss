// =============================================================================
// STYLEGUIDE BILD-TEXT BLOCK
// =============================================================================

.block-styleguide-bild-text {
    // Responsive Spacing für alle Styleguide-Blöcke
    @include styleguide-block-spacing-centered;
    width: 100%;
    max-width: $container-content;
    padding: 0;
    
    .styleguide-bild-text-container {
        width: 100%;
        overflow: hidden; // Verhindert Überlauf
        
        // 2-Spalten Grid Layout
        .styleguide-bild-text-grid {
            display: grid;
            gap: $spacing-lg;
            align-items: stretch; // Spalten gleiche Höhe
            width: 100%;
            box-sizing: border-box;
            min-width: 0; // Wichtig für flexibles Grid
            
            @media (max-width: $breakpoint-tablet) {
                // Mobile: Spalten untereinander
                grid-template-columns: 1fr !important;
                gap: $spacing-md;
                
                // Bild immer oben auf Mobile
                .styleguide-bild-text-image-column {
                    order: 1;
                }
                
                .styleguide-bild-text-content-column {
                    order: 2;
                }
            }
        }
        
        // Bild-Spalte
        .styleguide-bild-text-image-column {
            display: flex;
            align-items: stretch;
            justify-content: center;
            width: 100%;
            overflow: hidden;
            min-width: 0; // Wichtig für flexibles Grid
            
            .styleguide-bild-text-image-container {
                width: 100%;
                height: 100%;
                position: relative;
                overflow: hidden;
                // border-radius entfernt (Problem 3)
                
                .styleguide-bild-text-image {
                    width: 100%;
                    height: 100%;
                    object-position: center center;
                    transition: transform 0.3s ease;
                    display: block;
                }
                
                // Cover: Bild füllt Container komplett aus
                &.styleguide-bild-text-image--cover {
                    .styleguide-bild-text-image {
                        object-fit: cover;
                        min-height: 100%;
                    }
                }
                
                // Contain: Bild vollständig sichtbar, oben ausgerichtet
                &.styleguide-bild-text-image--contain {
                    .styleguide-bild-text-image {
                        object-fit: contain;
                        object-position: center top;
                        min-height: 100%;
                    }
                }
                
                @media (max-width: $breakpoint-tablet) {
                    min-height: 250px;
                }
                
                @media (max-width: $breakpoint-mobile) {
                    min-height: 200px;
                }
            }
        }
        
        // Text-Spalte
        .styleguide-bild-text-content-column {
            display: flex;
            align-items: center;
            width: 100%;
            overflow: hidden;
            min-width: 0; // Wichtig für flexibles Grid
            
            .styleguide-bild-text-content {
                width: 100%;
                display: flex;
                flex-direction: column;
                gap: $spacing-sm;
                padding: $spacing-sm 0; // Vertikales Padding für bessere Ausrichtung
                min-width: 0; // Wichtig für flexibles Grid
                
                .styleguide-bild-text-headline {
                    margin: 0;
                    padding: 0;
                    line-height: 1.2; // $line-height-headline nicht verfügbar in diesem Kontext
                    letter-spacing: $letter-spacing-base;
                    font-family: $font-family-primary;
                    word-wrap: break-word;
                    overflow-wrap: break-word;
                    hyphens: auto;
                    -webkit-hyphens: auto;
                    -moz-hyphens: auto;
                    -ms-hyphens: auto;
                    
                    &:has(+ .styleguide-bild-text-text),
                    &:has(+ .styleguide-bild-text-button-wrapper) {
                        margin-bottom: $spacing-sm;
                    }
                }
                
                .styleguide-bild-text-text {
                    margin: 0;
                    padding: 0;
                    line-height: 1.4; // $line-height-base nicht verfügbar in diesem Kontext
                    letter-spacing: $letter-spacing-base;
                    font-family: $font-family-primary;
                    word-wrap: break-word;
                    overflow-wrap: break-word;
                    hyphens: auto;
                    -webkit-hyphens: auto;
                    -moz-hyphens: auto;
                    -ms-hyphens: auto;
                    
                    &:has(+ .styleguide-bild-text-button-wrapper) {
                        margin-bottom: $spacing-sm;
                    }
                    
                    // ✅ WYSIWYG-FREUNDLICHE STYLES: Keine !important, respektiert inline-Styles
                    // Nur Basis-Elemente ohne eigene Formatierung erben
                    > div:not([style*="font-size"]):not([style*="color"]):not([data-abf-color]):not([data-abf-font-size]),
                    > p:not([style*="font-size"]):not([style*="color"]):not([data-abf-color]):not([data-abf-font-size]) {
                        font-size: inherit;
                        font-weight: inherit;
                        color: inherit;
                        line-height: inherit;
                        letter-spacing: inherit;
                    }
                    
                    // Spans erben nur wenn sie keine WYSIWYG-Formatierung haben
                    span:not([style]):not([data-abf-color]):not([data-abf-font-size]) {
                        font-size: inherit;
                        font-weight: inherit;
                        color: inherit;
                    }
                    
                    // Semantische Elemente behalten ihre Funktion
                    strong, b {
                        font-weight: bold; // Nicht überschreiben!
                        font-size: inherit;
                        color: inherit;
                    }
                    
                    em, i {
                        font-style: italic; // Nicht überschreiben!
                        font-size: inherit;
                        color: inherit;
                    }
                    
                    // Links behalten Unterstreichung
                    a {
                        font-size: inherit;
                        font-weight: inherit;
                        color: inherit;
                        text-decoration: underline;
                        
                        &:hover {
                            text-decoration: none;
                        }
                    }
                    
                    // Listen-Styles
                    ul, ol {
                        font-size: inherit;
                        font-weight: inherit;
                        color: inherit;
                        margin: $spacing-sm 0;
                        padding-left: $spacing-md;
                    }
                    
                    li {
                        font-size: inherit;
                        font-weight: inherit;
                        color: inherit;
                        margin-bottom: $spacing-xs;
                    }
                }
                
                .styleguide-bild-text-button-wrapper {
                    margin: 0;
                    padding: 0;
                    
                    .styleguide-bild-text__button {
                        display: inline-flex;
                        align-items: center;
                        justify-content: center;
                        font-family: $font-family-primary;
                        font-weight: $font-weight-regular;
                        font-size: $font-size-body;
                        line-height: 1.2;
                        padding: $button-padding-y $button-padding-x;
                        border: none;
                        border-radius: $button-border-radius;
                        text-decoration: none;
                        cursor: pointer;
                        transition: background-color 0.3s ease, color 0.3s ease;
                        white-space: nowrap;
                        
                        &:hover,
                        &:focus {
                            text-decoration: none;
                            outline: none;
                        }
                    }
                }
            }
        }
    }
    
    // Styling für farbigen Container (wenn Hintergrundfarbe gewählt ist)
    .styleguide-bild-text-container.has-background-color {
        border-radius: 10px;
        box-shadow: 0 3px 3px rgba(0, 0, 0, 0.25);
        padding: $spacing-sm;
        
        @media (min-width: $breakpoint-mobile) {
            padding: $spacing-md;
        }
        
        @media (min-width: $breakpoint-tablet) {
            padding: $spacing-md;
        }
        
        @media (min-width: $breakpoint-desktop) {
            padding: $spacing-lg;
        }
    }
}

// =============================================================================
// RESPONSIVE DESIGN
// =============================================================================

// Tablet und kleiner: Vereinfachtes Layout
@media (max-width: $breakpoint-tablet) {
    .block-styleguide-bild-text {
        .styleguide-bild-text-container {
            .styleguide-bild-text-grid {
                gap: $spacing-md;
            }
            
            .styleguide-bild-text-content-column {
                .styleguide-bild-text-content {
                    gap: $spacing-xs;
                    padding: $spacing-xs 0;
                    
                    .styleguide-bild-text-headline:has(+ .styleguide-bild-text-text),
                    .styleguide-bild-text-headline:has(+ .styleguide-bild-text-button-wrapper) {
                        margin-bottom: $spacing-xs;
                    }
                    
                    .styleguide-bild-text-text:has(+ .styleguide-bild-text-button-wrapper) {
                        margin-bottom: $spacing-xs;
                    }
                }
            }
        }
    }
}

// Mobile: Kompaktes Layout
@media (max-width: $breakpoint-mobile) {
    .block-styleguide-bild-text {
        .styleguide-bild-text-container {
            .styleguide-bild-text-grid {
                gap: $spacing-sm;
            }
            
            .styleguide-bild-text-content-column {
                .styleguide-bild-text-content {
                    gap: $spacing-xs;
                    padding: $spacing-xs 0;
                }
            }
        }
    }
}

// Fallback für Browser ohne :has() Support
@supports not (selector(:has(*))) {
    .block-styleguide-bild-text {
        .styleguide-bild-text-content {
            .styleguide-bild-text-headline,
            .styleguide-bild-text-text {
                margin-bottom: $spacing-sm;
                
                @media (max-width: $breakpoint-tablet) {
                    margin-bottom: $spacing-xs;
                }
            }
        }
        
        // =============================================================================
        // DOWNLOADS STYLING
        // =============================================================================
        .styleguide-bild-text-downloads {
            margin-top: $spacing-sm;
            margin-bottom: $spacing-sm;
            
            a {
                // Download-Links verwenden das einheitliche Typography-System
                // display: block wird nur angewendet, wenn es KEIN Download-Link ist
                margin-bottom: $spacing-xs;
                
                &:last-child {
                    margin-bottom: 0;
                }
                
                // Für Links ohne Datei-Endung (normale Links) trotzdem block
                &:not([href$=".pdf"]):not([href$=".PDF"]):not([href$=".zip"]):not([href$=".ZIP"]):not([href$=".jpg"]):not([href$=".JPG"]):not([href$=".jpeg"]):not([href$=".JPEG"]):not([href$=".png"]):not([href$=".PNG"]):not([href$=".svg"]):not([href$=".SVG"]):not([href$=".xls"]):not([href$=".XLS"]):not([href$=".xlsx"]):not([href$=".XLSX"]):not([href$=".dotx"]):not([href$=".DOTX"]) {
                    display: block;
                }
            }
        }
    }
} 